<!DOCTYPE html>
<html lang="en">
<head>
   <meta charset="UTF-8">
   <meta name="viewport" content="width=device-width, initial-scale=1.0">
   <link href='https://fonts.googleapis.com/css?family=Space Mono' rel='stylesheet'>
   <title>Horizon WebHost</title>
   <style>
      .sidebar-container {
         width: 15%;
         height: 100vh;
         background-color: #1B0D26;
         display: flex;
         flex-direction: column;
         align-items: center;
      }

      .sidebar-top {
         padding: 20px;
      }
      .sidebar-top>h1 {
         color: white;
      }

      .sidebar-list {
         list-style-type: none;
         padding: 0;
         margin: 20px 0;
         width: 100%;
      }

      .sidebar-menuitem {
         color: white;
         font-size: 20px;
         padding: 10px;
         text-align: center;
         background-color: #121236;
         border-radius: 5px;
         margin-bottom: 5px;
         transition: background-color 0.1s ease-in-out;
      }

      .sidebar-menuitem a {
         text-decoration: none;
         color: white;
      }

      .sidebar-menuitem:hover {
         background-color: #121254;
         transition: background-color 0.1s ease-in-out;
      }

      .sidebar-menuitem:active {
         background-color: #121399;
      }

      .card-container {
         margin: 2vh 0 0 0;
         display: flex;
         flex-wrap: wrap;
         align-items: flex-start;
         justify-content: flex-start;
         padding: 20px;
         width: 80%;
      }

      .card {
         width: calc(30%);
         margin: 15px 10px 15px 10px;
         background-color: #1B0D26;
         border-radius: 10px;
         box-shadow: 0 0 10px rgba(0, 0, 0, 0.5);
         padding: 20px;
         color: white;
         transition: background-color 0.1s ease-in-out;
      }

      .card:hover {
         background-color: #1B0D41;
         transition: background-color 0.1s ease-in-out;
      }

      .card h1 {
         margin-top: 0;
      }

      html, body {
         font-family: 'Space Mono';
         margin: 0 !important;
         padding: 0 !important;
         overflow: hidden;
         background-color: #0D1826;
         display: flex;
         flex-direction: row;
      }

      @media (max-width: 900px) {
         html, body {
            flex-direction: column;
         }

         .sidebar-container {
            width: 100%;
            height: auto;
         }

         .card-container {
            width: 100%;
         }

         .card {
            width: calc(85%);
         }
      }
   </style>
</head>
<body>
   <div class="sidebar-container">
      <div class="sidebar-top">
         <h1>Horizon</h1>
      </div>
      <ul class="sidebar-list">
         <li class="sidebar-menuitem"><a href="#">Metrics</a></li>
         <li class="sidebar-menuitem"><a href="#">Settings</a></li>
      </ul>
   </div>
   <div class="card-container">
      <div class="card" id="card-render">
         <h1>Render</h1>
         <p>Lorem ipsum dolor sit amet, consectetur adipisicing elit. Quisquam, quod, quaerat, quasi, repellendus, quidem, repudiandae, doloremque, quibusdam, quasi, repellendus, quidem, repudiandae, doloremque, quibusdam, quasi, repellendus, quidem, repudiandae, doloremque, quibusdam</p>
      </div>
      <div class="card" id="card-state">
         <h1>State</h1>
         <p>Lorem ipsum dolor sit amet, consectetur adipisicing elit. Quisquam, quod, quaerat, quasi, repellendus, quidem, repudiandae, doloremque, quibusdam, quasi, repellendus, quidem, repudiandae, doloremque, quibusdam, quasi, repellendus, quidem, repudiandae, doloremque, quibusdam</p>
      </div>
      <div class="card" id="card-physics">
         <h1>Physics</h1>
         <p>Lorem ipsum dolor sit amet, consectetur adipisicing elit. Quisquam, quod, quaerat, quasi, repellendus, quidem, repudiandae, doloremque, quibusdam, quasi, repellendus, quidem, repudiandae, doloremque, quibusdam, quasi, repellendus, quidem, repudiandae, doloremque, quibusdam</p>
      </div>
   </div>

   <script>
      const dataUrl = 'http://127.0.0.1:8080/data';
      var getJSON = function(callback) {
         var xhr = new XMLHttpRequest();
         xhr.open('GET', dataUrl, true);
         xhr.responseType = 'json';
         xhr.onload = function() {
            var status = xhr.status;
            if (status === 200) {
            callback(null, xhr.response);
            } else {
            callback(status, xhr.response);
            }
         };
         xhr.send();
      };

      function updateAll() {
         getJSON(function(err, data) {
            if (err !== null) {
               console.log('Something went wrong: ' + err);
            } else {
               updateCards(data);   
            }
         });
         setTimeout(updateAll, 1000);
      } updateAll();

      const CARD_RENDER_TITLE = 'Render';
      const CARD_STATE_TITLE = 'State';
      const CARD_PHYSICS_TITLE = 'Physics';

      function updateCards(data) {
         document.querySelector('#card-render').childNodes[1].textContent = CARD_RENDER_TITLE + ' ' + Math.round(1.0 / data.RenderRate);         
         document.querySelector('#card-state').childNodes[1].textContent = CARD_STATE_TITLE + ' ' + Math.round(1.0 / data.LogicRate);         
         document.querySelector('#card-physics').childNodes[1].textContent = CARD_PHYSICS_TITLE + ' ' + Math.round(1.0 / data.PhysicsRate);         
      }
      
   </script>

</body>
</html>